# ğŸš€ SpaceX Launch Service (AWS Lambda + GitHub Actions)

Este proyecto implementa un servicio sin servidor (serverless) en AWS Lambda que expone una API REST para consultar lanzamientos de SpaceX. Se despliega automÃ¡ticamente con GitHub Actions y AWS SAM.

---

## ğŸ§° TecnologÃ­as utilizadas

- Python 3.12
- AWS Lambda
- Amazon API Gateway
- Amazon DynamoDB
- Amazon EventBridge
- Amazon S3
- AWS Identity and Access Management (IAM)
- AWS SAM (Serverless Application Model)
- GitHub Actions
- Docker (para pruebas locales)

---

## ğŸ“ Estructura del proyecto

â”œâ”€â”€ .github/workflows/ci-cd.yml # Pipeline de despliegue automÃ¡tico
â”œâ”€â”€ src/ # CÃ³digo fuente (handler.py)
â”œâ”€â”€ template.yaml # DefiniciÃ³n de recursos AWS (SAM)
â”œâ”€â”€ requirements.txt # Dependencias de Python
â””â”€â”€ tests/ # Pruebas unitarias


## ğŸš€ Despliegue en AWS real (automÃ¡tico con GitHub Actions)

### 1. ğŸ”‘ Configurar los Secrets en GitHub
Ve al repositorio â†’ **Settings** â†’ **Secrets and variables** â†’ **Actions** â†’ y agrega:

| Nombre del Secret         | DescripciÃ³n                            |
|---------------------------|----------------------------------------|
| `AWS_ACCESS_KEY_ID`       | Access Key de un usuario IAM           |
| `AWS_SECRET_ACCESS_KEY`   | Secret Key del usuario IAM             |
| `AWS_REGION`              | RegiÃ³n donde desplegar (ej: `us-east-1`) |

AsegÃºrate de que el usuario IAM de AWS tenga permisos para usar:

- AdministratorAccess
- AmazonDynamoDBFullAccess
- AmazonS3FullAccess
- AWSCloudFormationFullAccess
- AWSLambda_FullAccess
- CloudWatchLogsFullAccess

### 2. ğŸ“ Â¿QuÃ© hace el pipeline?

Cada vez que haces **push a `master`**:

1. Construye el proyecto e instala las dependencias
2. Corre tests unitarios.
3. Asegura que el bucket S3 exista.
4. Usa `sam build` y `sam deploy` para desplegar la funciÃ³n Lambda en la cuenta AWS real.

---

### 3. ğŸ“¡ Â¿QuÃ© recurso se crea?

- Una funciÃ³n Lambda que responde a `GET /launches` en una API REST.
- Un cron (Schedule) que actualiza la informaciÃ³n cada 6 horas.
- Una tabla DynamoDB llamada `launches`.
- Un Bucket en S3 llamado `spacex-deploy-artifacts`

---

## ğŸ” Pruebas manuales

Una vez desplegado, puedes consultar la API desde:   
- GET https://<tu-url-api>.amazonaws.com/Prod/launches

## ğŸ§ª Pruebas locales con Docker (opcional)

Puedes ejecutar tu funciÃ³n Lambda en local asÃ­:

## ğŸ“¦ Requisitos

- [Docker](https://www.docker.com/products/docker-desktop) instalado y corriendo.
- [AWS SAM CLI](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html) instalado.
- Python 3.12 y `pip`.

---

## ğŸŒ 1. Crear red de Docker (solo la primera vez)

Esto permite la comunicacion con DynamoDB Local.

```bash
docker network create my-network

## ğŸ³ 1. Instalar y correr DynamoDB Local

Ejecuta el siguiente comando para iniciar DynamoDB Local:

```bash
docker run -d -p 8000:8000 --network my-network --name dynamodb-local amazon/dynamodb-local 


## En la raiz del proyecto para construir la imagen docker lambda ejecutar.

```bash
docker build -t spacex-lambda .

## Ejecutar el contenedor

```bash
docker run -p 9000:8080 \
  --network my-network \
  -e REGION_NAME=us-east-1 \
  -e ACCESS_KEY=dummy \
  -e SECRET_KEY=dummy \
  -e DB_TABLE_NAME=launches \
  -e DB_HOST=dynamodb-local \
  -e DB_PORT=8000 \
  spacex-lambda

## api test
```bash
curl -XPOST "http://localhost:9000/2015-03-31/functions/function/invocations" \
  -d '{}'
